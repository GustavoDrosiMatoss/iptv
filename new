-- Carrega a Fluent GUI
local Fluent = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/source.lua"))()

local Window = Fluent:CreateWindow({
    Title = "Allan Hub - Dungeon",
    SubTitle = "Controle de Dungeon Autom√°tico",
    TabWidth = 160,
    Size = UDim2.fromOffset(520, 350),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl
})

-- Aba principal
local Tab = Window:AddTab({ Title = "Dungeon", Icon = "swords" })

-------------------------------------------------
-- Fun√ß√µes principais
-------------------------------------------------

-- Fun√ß√£o para criar a Dungeon
local function criarDungeon()
    local args = {
        [1] = {
            [1] = {
                ["Event"] = "DungeonAction",
                ["Action"] = "Create"
            },
            [2] = ""
        }
    }
    game:GetService("ReplicatedStorage").BridgeNet2.dataRemoteEvent:FireServer(unpack(args))
    print("‚úî Dungeon criada.")
end

-- Fun√ß√£o para iniciar a Dungeon
local function iniciarDungeon()
    local args = {
        [1] = {
            [1] = {
                ["Event"] = "DungeonAction",
                ["Action"] = "Start"
            },
            [2] = ""
        }
    }
    game:GetService("ReplicatedStorage").BridgeNet2.dataRemoteEvent:FireServer(unpack(args))
    print("‚ñ∂ Dungeon iniciada.")
end

-- Fun√ß√£o para comprar ticket
local function comprarTicket()
    local args = {
        [1] = {
            [1] = {
                ["Type"] = "Gems",
                ["Event"] = "DungeonAction",
                ["Action"] = "BuyTicket"
            },
            [2] = "\12"
        }
    }
    game:GetService("ReplicatedStorage").BridgeNet2.dataRemoteEvent:FireServer(unpack(args))
    print("üéü Ticket comprado.")
end

-- Fun√ß√£o para checar se ainda h√° mobs vivos
local function mobsVivos()
    local enemiesFolder = workspace:FindFirstChild("__Enemies")
    if enemiesFolder and #enemiesFolder:GetChildren() > 0 then
        return true
    end
    return false
end

-- Fun√ß√£o do castelo infernal
local function entrarCastelo()
    local args = {
        [1] = {
            [1] = {
                ["Event"] = "EnterCastle",
                ["Action"] = "Join"
            },
            [2] = ""
        }
    }
    game:GetService("ReplicatedStorage").BridgeNet2.dataRemoteEvent:FireServer(unpack(args))
    print("üè∞ Entrando no Castelo Infernal.")
end

-------------------------------------------------
-- Bot√µes da GUI
-------------------------------------------------

Tab:AddButton({
    Title = "Criar + Iniciar Dungeon",
    Description = "Cria e inicia a Dungeon automaticamente.",
    Callback = function()
        criarDungeon()
        task.wait(2)
        iniciarDungeon()
    end
})

Tab:AddButton({
    Title = "Comprar Ticket",
    Description = "Compra ticket para Dungeon com Gems.",
    Callback = function()
        comprarTicket()
    end
})

Tab:AddButton({
    Title = "Entrar no Castelo Infernal",
    Description = "Teleporta para o Castelo Infernal.",
    Callback = function()
        entrarCastelo()
    end
})

Tab:AddButton({
    Title = "Loop Autom√°tico (Aguardar Mobs)",
    Description = "Cria, inicia e espera at√© matar todos os mobs antes de repetir.",
    Callback = function()
        while true do
            criarDungeon()
            task.wait(2)
            iniciarDungeon()

            print("‚öî Matando mobs...")
            repeat
                task.wait(1)
            until not mobsVivos()

            print("‚úî Todos os mobs mortos. Reiniciando...")
            comprarTicket()
        end
    end
})

Window:SelectTab(1)
Fluent:Notify({ Title = "Allan Hub", Content = "Script carregado com sucesso!", Duration = 5 })